#ifndef MAZE_H
#define MAZE_H

#define BLOCK_L 31
#define BLOCK_C 28

#include "opengl.hpp"
#include <iostream>
#include <math.h>

enum orientation { up, left, down, right };

class Maze {
 private:
  int matrix[BLOCK_L][BLOCK_C] = {
      {-1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1,
       -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1},
      {-1, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, -1,
       -1, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, -1},
      {-1, 10, -1, -1, -1, -1, 10, -1, -1, -1, -1, -1, 10, -1,
       -1, 10, -1, -1, -1, -1, -1, 10, -1, -1, -1, -1, 10, -1},
      {-1, 50, -1, -1, -1, -1, 10, -1, -1, -1, -1, -1, 10, -1,
       -1, 10, -1, -1, -1, -1, -1, 10, -1, -1, -1, -1, 50, -1},
      {-1, 10, -1, -1, -1, -1, 10, -1, -1, -1, -1, -1, 10, -1,
       -1, 10, -1, -1, -1, -1, -1, 10, -1, -1, -1, -1, 10, -1},
      {-1, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10,
       10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, -1},
      {-1, 10, -1, -1, -1, -1, 10, -1, -1, 10, -1, -1, -1, -1,
       -1, -1, -1, -1, 10, -1, -1, 10, -1, -1, -1, -1, 10, -1},
      {-1, 10, -1, -1, -1, -1, 10, -1, -1, 10, -1, -1, -1, -1,
       -1, -1, -1, -1, 10, -1, -1, 10, -1, -1, -1, -1, 10, -1},
      {-1, 10, 10, 10, 10, 10, 10, -1, -1, 10, 10, 10, 10, -1,
       -1, 10, 10, 10, 10, -1, -1, 10, 10, 10, 10, 10, 10, -1},
      {-1, -1, -1, -1, -1, -1, 10, -1, -1, -1, -1, -1, 0,  -1,
       -1, 0,  -1, -1, -1, -1, -1, 10, -1, -1, -1, -1, -1, -1},
      {-1, -1, -1, -1, -1, -1, 10, -1, -1, -1, -1, -1, 0,  -1,
       -1, 0,  -1, -1, -1, -1, -1, 10, -1, -1, -1, -1, -1, -1},
      {-1, -1, -1, -1, -1, -1, 10, -1, -1, 0,  0,  0,  0,  0,
       0,  0,  0,  0,  0,  -1, -1, 10, -1, -1, -1, -1, -1, -1},
      {-1, -1, -1, -1, -1, -1, 10, -1, -1, 0,  -1, -1, -1, -2,
       -2, -1, -1, -1, 0,  -1, -1, 10, -1, -1, -1, -1, -1, -1},
      {-1, -1, -1, -1, -1, -1, 10, -1, -1, 0,  -1, 0,  0,  0,
       0,  0,  0,  -1, 0,  -1, -1, 10, -1, -1, -1, -1, -1, -1},
      {0, 0, 0, 0,  0, 0, 10, 0,  0, 0, -1, 0, 0, 0,
       0, 0, 0, -1, 0, 0, 0,  10, 0, 0, 0,  0, 0, 0},
      {-1, -1, -1, -1, -1, -1, 10, -1, -1, 0,  -1, 0,  0,  0,
       0,  0,  0,  -1, 0,  -1, -1, 10, -1, -1, -1, -1, -1, -1},
      {-1, -1, -1, -1, -1, -1, 10, -1, -1, 0,  -1, -1, -1, -1,
       -1, -1, -1, -1, 0,  -1, -1, 10, -1, -1, -1, -1, -1, -1},
      {-1, -1, -1, -1, -1, -1, 10, -1, -1, 0,  0,  0,  0,  0,
       0,  0,  0,  0,  0,  -1, -1, 10, -1, -1, -1, -1, -1, -1},
      {-1, -1, -1, -1, -1, -1, 10, -1, -1, 0,  -1, -1, -1, -1,
       -1, -1, -1, -1, 0,  -1, -1, 10, -1, -1, -1, -1, -1, -1},
      {-1, -1, -1, -1, -1, -1, 10, -1, -1, 0,  -1, -1, -1, -1,
       -1, -1, -1, -1, 0,  -1, -1, 10, -1, -1, -1, -1, -1, -1},
      {-1, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, -1,
       -1, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, -1},
      {-1, 10, -1, -1, -1, -1, 10, -1, -1, -1, -1, -1, 10, -1,
       -1, 10, -1, -1, -1, -1, -1, 10, -1, -1, -1, -1, 10, -1},
      {-1, 10, -1, -1, -1, -1, 10, -1, -1, -1, -1, -1, 10, -1,
       -1, 10, -1, -1, -1, -1, -1, 10, -1, -1, -1, -1, 10, -1},
      {-1, 50, 10, 10, -1, -1, 10, 10, 10, 10, 10, 10, 10, 0,
       0,  10, 10, 10, 10, 10, 10, 10, -1, -1, 10, 10, 50, -1},
      {-1, -1, -1, 10, -1, -1, 10, -1, -1, 10, -1, -1, -1, -1,
       -1, -1, -1, -1, 10, -1, -1, 10, -1, -1, 10, -1, -1, -1},
      {-1, -1, -1, 10, -1, -1, 10, -1, -1, 10, -1, -1, -1, -1,
       -1, -1, -1, -1, 10, -1, -1, 10, -1, -1, 10, -1, -1, -1},
      {-1, 10, 10, 10, 10, 10, 10, -1, -1, 10, 10, 10, 10, -1,
       -1, 10, 10, 10, 10, -1, -1, 10, 10, 10, 10, 10, 10, -1},
      {-1, 10, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, 10, -1,
       -1, 10, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, 10, -1},
      {-1, 10, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, 10, -1,
       -1, 10, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, 10, -1},
      {-1, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10,
       10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, -1},
      {-1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1,
       -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1}};

  int backup[BLOCK_L][BLOCK_C];
  int dotsRemaining;
  glm::vec2 tunnelLeft;
  glm::vec2 tunnelRight;

 public:
  glm::vec2 getCenter(glm::vec3 position);

  int getDotsRemaining();
  void decrementDotsRemaining();

  glm::ivec2 blockNext(glm::ivec2 block, orientation direction);

  bool valid(glm::ivec2 block, bool door);

  bool isDoor(glm::ivec2 block);

  int eat(glm::ivec2 block);

  int value(glm::ivec2 block);

  float euclidianDist(glm::vec2 position1, glm::vec2 position2);

  glm::vec2 blockToPixel(glm::ivec2 block);

  glm::ivec2 pixelToBlock(glm::vec2 center);

  glm::vec2 getTunnelLeft();

  glm::vec2 getTunnelRight();

  void reset();

  Maze();
};

#endif
